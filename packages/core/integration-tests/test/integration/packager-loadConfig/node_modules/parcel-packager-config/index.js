// @flow strict-local

/*::
import type {ConfigOutput} from '@parcel/types';
*/

const invariant = require('assert');
const path = require('path');
const {Packager} = require('@parcel/plugin');
const {loadConfig} = require('@parcel/utils');

module.exports = (new Packager({
  async loadConfig({options}) {
    let result = await loadConfig(
      options.inputFS,
      path.join(options.entryRoot, 'index'),
      ['foo.config.json'],
    );

    return result;
  },
  package({bundle, config}) {
    invariant(config);
    return {contents: config.contents};
  },
}) /*: Packager */);
